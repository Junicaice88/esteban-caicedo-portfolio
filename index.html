<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Portfolio – Crossfade + Video</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="header">
    <a href="index.html"><strong>Esteban Caicedo</strong></a>
    <div style="flex:1"></div>
    <a href="#projects">Projects</a>
  </div>
  <main class="container" id="projects">
    <h1>Engineering Projects</h1>
    <p class="lead">Portfolio with CAD/CAE projects, interactive 3D models, and mixed-media galleries.</p>
    <div id="grid" class="grid"></div>
  </main>
<script>
async function getProjects(){ const r=await fetch('projects.json'); return r.json(); }
function mountImageSlider(container, images){
  container.classList.add('slider');
  const a=document.createElement('div');a.className='slide-layer active';
  const b=document.createElement('div');b.className='slide-layer';
  const imgA=document.createElement('img'); const imgB=document.createElement('img');
  imgA.src=images[0]||''; imgB.src=images[1]||images[0]||''; a.append(imgA); b.append(imgB); container.append(a,b);
  let idx=0,useA=true; function show(n){ idx=(n+images.length)%images.length; const next=images[idx];
    if(useA){imgB.src=next;a.classList.remove('active');b.classList.add('active');}else{imgA.src=next;b.classList.remove('active');a.classList.add('active');}
    useA=!useA; if(dots){[...dots.children].forEach((d,i)=>d.className='dot'+(i===idx?' active':''));}
  }
  const left=document.createElement('div');left.className='ctrl left';left.textContent='‹';
  const right=document.createElement('div');right.className='ctrl right';right.textContent='›';
  const dots=document.createElement('div');dots.className='dots';
  images.forEach((_,i)=>{const d=document.createElement('span');d.className='dot'+(i===0?' active':'');d.onclick=()=>show(i);dots.appendChild(d);});
  container.append(left,right,dots); left.onclick=()=>show(idx-1); right.onclick=()=>show(idx+1);
}
function cardTemplate(p){
  const el=document.createElement('a'); el.href='project.html?slug='+encodeURIComponent(p.slug); el.className='card';
  const slider=document.createElement('div'); slider.style.height='240px'; mountImageSlider(slider,p.images||[]);
  const meta=document.createElement('div'); meta.className='meta';
  meta.innerHTML='<div style="font-weight:600">'+p.title+'</div><div class="badges">'+(p.tags||[]).map(t=>'<span class="badge">'+t+'</span>').join('')+'</div>';
  el.append(slider,meta); return el;
}
(async ()=>{ const items=await getProjects(); const grid=document.getElementById('grid'); items.forEach(p=>grid.appendChild(cardTemplate(p))); })();
</script>
</body></html>