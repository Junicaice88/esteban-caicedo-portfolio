<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Project</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <script>
    const safe = p => (typeof p === 'string' ? encodeURI(p) : p);
    async function init(){
      const params=new URLSearchParams(location.search);
      const slug=params.get('slug');
      const res=await fetch('projects.json');
      const items=await res.json();
      const p=items.find(x=>x.slug===slug);
      const root=document.getElementById('root');
      if(!p){root.textContent='Project not found';return;}
      root.innerHTML=`<h1 class='text-2xl font-bold mb-2'>${p.title}</h1>
      <p class='text-gray-400 mb-4'>${p.longDescription||p.description}</p>`;
      if(p.model){
        const mv=document.createElement('model-viewer');
        mv.src=safe(p.model);
        mv.setAttribute('camera-controls','');
        mv.setAttribute('style','width:100%;height:400px;background:#111;border-radius:12px');
        root.appendChild(mv);
      }
    }
    window.onload=init;
  </script>
</head>
<body class="bg-gray-900 text-white">
  <div class="max-w-5xl mx-auto py-10" id="root"></div>
</body>
</html>
